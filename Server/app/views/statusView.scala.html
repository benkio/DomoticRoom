@main("Domotic Room Control Panel") {

<h1>Flot Examples</h1>

<div id="placeholder" style="width:600px;height:300px;"></div>

<p>You can update a chart periodically to get a real-time effect
    by using a timer to insert the new data in the plot and redraw it.</p>

<p>Time between updates: <input id="updateInterval" type="text" value="" style="text-align: right; width:5em"> milliseconds</p>

<div>
    <button id="btnStartStreaming">(re)Start Streaming</button>
</div>
<div>
    <button id="btnStopStreaming">Stop Streaming</button>
</div>

<script>
    var updateIntervalId;

    $("#btnStartStreaming").click(function() {
        connectToWS(function (){
            var updateInterval = $("#updateInterval").val();
            console.log(updateInterval);
            updateIntervalId = setInterval(function() {
                var json = JSON.stringify({ request: true });
                sendMsg(json);
            }, updateInterval);
        });
    });
    $("#btnStopStreaming").click(function() {
        if (updateIntervalId != undefined)
            clearInterval(updateIntervalId);
        closeConn();
        updateIntervalId = undefined
    });
</script>
}
